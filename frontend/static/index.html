<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>Aura AI Jewelry Designer</title>
    <style>
        html, body { height: 100%; margin: 0; padding: 0; }
        body {
            background: #181A20;
            color: #F5F6FA;
            font-family: 'Segoe UI', sans-serif;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
        }
        .container {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            display: flex; flex-direction: column; align-items: center; justify-content: flex-start;
            width: 100vw; height: 100vh; padding: 0;
        }
        h1 {
            font-size: 2.2rem; font-weight: 700; margin: 32px 0 12px 0; letter-spacing: 1px; text-align: center;
        }
        .desc {
            font-size: 1.1rem; color: #A5A7B2; margin-bottom: 24px; text-align: center;
        }
        form {
            display: flex; flex-direction: row; gap: 12px; justify-content: center; margin-bottom: 18px; flex-wrap: wrap;
        }
        .form-label { margin-left: 8px; font-size: 1rem; color: #A5A7B2; }
        input[type='text'], input[type='number'], select {
            padding: 14px 16px; border-radius: 8px; border: none; font-size: 1rem; background: #23262F; color: #F5F6FA; outline: none; box-shadow: 0 2px 8px rgba(0,0,0,0.08); width: 180px;
        }
        button {
            padding: 14px 32px; border-radius: 8px; border: none; background: linear-gradient(90deg, #6C47FF 0%, #00C6FB 100%); color: #fff; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: background 0.2s;
        }
        button:hover { background: linear-gradient(90deg, #00C6FB 0%, #6C47FF 100%); }
        #viewer {
            flex: 1; width: 100vw; height: 70vh; background: #23262F; border-radius: 16px; box-shadow: 0 4px 24px rgba(0,0,0,0.15); margin: 0 auto; display: flex; align-items: center; justify-content: center;
        }
        .result {
            position: fixed; left: 50%; bottom: 32px; transform: translateX(-50%); color: #A5A7B2; font-size: 1rem; text-align: center; word-break: break-word; white-space: pre-line; max-width: 90vw; background: rgba(35,38,47,0.95); border-radius: 12px; padding: 16px 24px; z-index: 100; box-shadow: 0 2px 12px rgba(0,0,0,0.15);
        }
        .error {
            color: #FF6B6B; word-break: break-word; white-space: pre-line;
        }
        
        /* V6.0 Refinement UI Styles */
        .refine-section {
            display: none; width: 100%; max-width: 800px; background: #23262F; border-radius: 12px; padding: 24px; margin: 24px 0; box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        }
        .refine-section.visible {
            display: block;
        }
        .refine-section h3 {
            margin: 0 0 16px 0; color: #6C47FF; font-size: 1.3rem; font-weight: 600;
        }
        .reasoning-display {
            background: #1A1D23; border-radius: 8px; padding: 16px; margin: 16px 0; border-left: 4px solid #6C47FF;
        }
        .reasoning-display h4 {
            margin: 0 0 8px 0; color: #00C6FB; font-size: 1rem;
        }
        .reasoning-text {
            color: #A5A7B2; line-height: 1.6; font-style: italic;
        }
        .refine-form {
            display: flex; flex-direction: row; gap: 12px; align-items: flex-end; flex-wrap: wrap; margin-top: 16px;
        }
        .refine-form input {
            flex: 1; min-width: 300px;
        }
        .refine-btn {
            padding: 12px 24px; font-size: 1rem; background: linear-gradient(90deg, #00C6FB 0%, #6C47FF 100%);
        }
        .refine-btn:hover {
            background: linear-gradient(90deg, #6C47FF 0%, #00C6FB 100%);
        }
    </style>
    <script type="module" src="/static/js/main.js"></script>
<!--
    Backend STL export requires Blender add-on: "Import-Export: STL format" enabled in Blender preferences.
    To avoid future issues, open Blender, go to Edit > Preferences > Add-ons, search for "STL", enable it, and save preferences.
-->
</head>
<body>
    <div class='container'>
        <h1>Aura V6.0 Sentient Cognitive Loop</h1>
        <div class='desc'>Describe your dream jewelry piece and use the iterative refinement system to perfect your design.</div>
        <form id='jewelry-form'>
            <input type='text' id='prompt' name='prompt' placeholder='Creative prompt (e.g. Art Nouveau vines)' required />
            <label for='metal' class='form-label'>Metal Type:</label>
            <select id='metal' name='metal' title='Metal Type'>
                <option value='GOLD'>Gold</option>
                <option value='SILVER'>Silver</option>
                <option value='PLATINUM'>Platinum</option>
            </select>
            <input type='number' id='ring_size' name='ring_size' min='1' max='16' step='0.25' value='7' placeholder='Ring Size (US)' required />
            <label for='stone_shape' class='form-label'>Stone Shape:</label>
            <select id='stone_shape' name='stone_shape' title='Stone Shape'>
                <option value='ROUND'>Round</option>
                <option value='OVAL'>Oval</option>
                <option value='PRINCESS'>Princess</option>
            </select>
            <input type='number' id='stone_carat' name='stone_carat' min='0.1' max='10' step='0.1' value='1.0' placeholder='Stone Size (Carats)' required />
            <button type='submit'>Generate Initial Design</button>
        </form>
        
        <!-- V6.0 AI Reasoning Display -->
        <div id='reasoning-display' class='reasoning-display' style='display: none;'>
            <h4>AI Designer Reasoning</h4>
            <div id='reasoning-text' class='reasoning-text'></div>
        </div>
        
        <div id='viewer'></div>
        
        <!-- V6.0 Refinement Section -->
        <div id='refine-section' class='refine-section'>
            <h3>ðŸŽ¯ Refine Your Design</h3>
            <p>Your design has been analyzed. Describe how you'd like to improve it:</p>
            <form id='refine-form' class='refine-form'>
                <input type='text' id='refinement-prompt' placeholder='e.g. make it thicker, add more texture, change to 6 prongs' required />
                <button type='submit' class='refine-btn'>Refine Design</button>
            </form>
        </div>
        
        <div id='result' class='result'></div>
    </div>
</body>
</html>
